# Connecting to an External Serverices
- Resources Section 아래에 AWS에서 제공하는 리소스들을 선언하여 생성할수 있다.
  
### DynamoDB 
- Syntax: 
```
Type: AWS::DynamoDB::GlobalTable
Properties: 
  AttributeDefinitions: 
    - AttributeDefinition
  BillingMode: String
  GlobalSecondaryIndexes: 
    - GlobalSecondaryIndex
  KeySchema: 
    - KeySchema
  LocalSecondaryIndexes: 
    - LocalSecondaryIndex
  Replicas: 
    - ReplicaSpecification
  SSESpecification: 
    SSESpecification
  StreamSpecification: 
    StreamSpecification
  TableName: String
  TimeToLiveSpecification: 
    TimeToLiveSpecification
  WriteProvisionedThroughputSettings: 
    WriteProvisionedThroughputSettings
```
- AttributeDefinition: 테이블에 저장할 attribute들을 저장
- BillingMode: 어떤식으로 charge가 될건지 지정
- GlobalSecondaryIndex: 인덱스를 사용할때 지정, 최대 20개
- KeySchema: Primary Key설정
- LocalSecondaryIndex: 인덱스 지정
- StreamSpecification: DynamoDB Stream 설정. Stream은 DynamoDB에서 일어나는 기록들(INSERT, MODIFY, DELETE)을 말한다.
- TimeToLiveSpecification: 각 document들에 ttl을 설정할수 있다.
- ex) 
```
AWSTemplateFormatVersion: "2010-09-09"
Resources: 
  myDynamoDBTable: 
    Type: AWS::DynamoDB::Table
    Properties: 
      AttributeDefinitions: 
        - 
          AttributeName: "Album"
          AttributeType: "S"
        - 
          AttributeName: "Artist"
          AttributeType: "S"
        - 
          AttributeName: "Sales"
          AttributeType: "N"
        - 
          AttributeName: "NumberOfSongs"
          AttributeType: "N"
        - 
          AttributeName: "TTLValue"
          AttributeType: "N"
      KeySchema: 
        - 
          AttributeName: "Album"
          KeyType: "HASH"
        - 
          AttributeName: "Artist"
          KeyType: "RANGE"
      ProvisionedThroughput: 
        ReadCapacityUnits: "5"
        WriteCapacityUnits: "5"
      TableName: "myTableName"
      GlobalSecondaryIndexes: 
        - 
          IndexName: "myGSI"
          KeySchema: 
            - 
              AttributeName: "Sales"
              KeyType: "HASH"
            - 
              AttributeName: "Artist"
              KeyType: "RANGE"
          Projection: 
            NonKeyAttributes: 
              - "Album"
              - "NumberOfSongs"
            ProjectionType: "INCLUDE"
          ProvisionedThroughput: 
            ReadCapacityUnits: "5"
            WriteCapacityUnits: "5"
        - 
          IndexName: "myGSI2"
          KeySchema: 
            - 
              AttributeName: "NumberOfSongs"
              KeyType: "HASH"
            - 
              AttributeName: "Sales"
              KeyType: "RANGE"
          Projection: 
            NonKeyAttributes: 
              - "Album"
              - "Artist"
            ProjectionType: "INCLUDE"
          ProvisionedThroughput: 
            ReadCapacityUnits: "5"
            WriteCapacityUnits: "5"
      LocalSecondaryIndexes: 
        - 
          IndexName: "myLSI"
          KeySchema: 
            - 
              AttributeName: "Album"
              KeyType: "HASH"
            - 
              AttributeName: "Sales"
              KeyType: "RANGE"
          Projection: 
            NonKeyAttributes: 
              - "Artist"
              - "NumberOfSongs"
            ProjectionType: "INCLUDE"
      TimeToLiveSpecification:
        AttributeName: "TTLValue"
        Enabled: True
```
- Projection은 index를 설정할때 index에 저장할 데이터를 지정
- NonKeyAttributes -> index에 추가로 저장할 attribute를 지정한다.(기본적으로는 primary key와 index할 attribute를 저장)
- ProjectionType: 
- INCLUDE: NonKeyAttributes까지 저장
- ALL: Document의 모든 attribute까지 저장
- KEYS_ONLY: Key만 저장
- TimeToLiveSpecification: TTLValue라는 attribute를 TTL값으로 설정
  
### S3
- Syntax:
```
Type: AWS::S3::Bucket
Properties: 
  AccelerateConfiguration: 
    AccelerateConfiguration
  AccessControl: String
  AnalyticsConfigurations: 
    - AnalyticsConfiguration
  BucketEncryption: 
    BucketEncryption
  BucketName: String
  CorsConfiguration: 
    CorsConfiguration
  IntelligentTieringConfigurations: 
    - IntelligentTieringConfiguration
  InventoryConfigurations: 
    - InventoryConfiguration
  LifecycleConfiguration: 
    LifecycleConfiguration
  LoggingConfiguration: 
    LoggingConfiguration
  MetricsConfigurations: 
    - MetricsConfiguration
  NotificationConfiguration: 
    NotificationConfiguration
  ObjectLockConfiguration: 
    ObjectLockConfiguration
  ObjectLockEnabled: Boolean
  OwnershipControls: 
    OwnershipControls
  PublicAccessBlockConfiguration: 
    PublicAccessBlockConfiguration
  ReplicationConfiguration: 
    ReplicationConfiguration
  Tags: 
    - Tag
  VersioningConfiguration: 
    VersioningConfiguration
  WebsiteConfiguration: 
    WebsiteConfiguration
```
 - AccessControl: 버킷을 access 하는 권한을 지정: Private, PublicRead, PublicReadWrite, AuthenticatedRead, LogDeliveryWrite, BucketOwnerRead, BucketOwnerFullControl, or AwsExecRead
 - BucketEncryption: 버킷을 어떻게 encrypt 할건지 설정
 - CorsConfiguration: Cors 세팅을 지정
 - VersioningConfiguration: S3 저장할때 object를 버저닝을 할수있다. True or False 해서 버저닝을 할건지 안할건지 지정
 - WebsiteConfiguration: Static Website 호스팅할때 어떻게 할건지 설정
  

